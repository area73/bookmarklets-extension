import {bklog} from '../utils.js';

const cssVulnerability = function() {
  bklog("::cssVulnerability::");
  bklog("this.checked", this.checked);


  function modifyDOM() {
    // TODO: aquÃ­ perdemos el contexto que estamos ejecutando una IIFE
    // TODO: no tenemos acceso a bklog y el console es el del current TAB
    //You can play with your DOM here
    console.log('Tab script:');
    console.log('document.body -->',document.body);
    console.log("document.styleSheets--->",document.styleSheets);
    // debugger;
    return document.styleSheets;
    // return document.body.innerHTML;
  }


  //We have permission to access the activeTab, so we can call chrome.tabs.executeScript:
  chrome.tabs.executeScript({
    code: '(' + modifyDOM + ')();' //argument here is a string but function.toString() returns function's code
  }, (results) => {
    bklog('Popup script 3:')
    bklog(results)

  });

}

export { cssVulnerability }
